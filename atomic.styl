/* import the montserrat font */
@import url(http://fonts.googleapis.com/css?family=Montserrat)

/* dimensions of elements */
size = 200px
electron = round(size / 3.236067978)
orbital = round(size / 14)
font = round(size / 7)
total = size + 2 * orbital + electron

/* colors */
border = #2ECC71
inner = #16A085
bg = white

transition()
  -webkit-transition arguments
  -moz-transition arguments
  -ms-transition arguments
  -o-transition arguments
  transition arguments

transform()
  -webkit-transform arguments
  -moz-transform arguments
  -ms-transform arguments
  -o-transform arguments
  transform arguments

/* move circles along the edge */
divide(a,b)
  p = (a * b) - (90 + a)deg
  display: block
  transform: rotate(p) translate(size / 2 + orbital / 2) rotate(-1 * p)

gradient(n)
  incr = (180 / 50)
  side = n < 50
  background:
      linear-gradient(round(-90deg + n * incr), (side ? bg : transparent) 50%, (side ? transparent : inner) 0)
    , linear-gradient(90deg, bg 50%, inner 0)
    , bg

/* define styleset, restricted to atomic */
.atomic
  counter-reset: atomic
  font-family: Montserrat,Helvetica
  height: total
  padding-top: round(electron / 2)
  position: relative
  width: total

  /* this will hide electrons and input steps */
  li
  input[type=radio]
    display: none

  /* calculate the positions for each atom */
  &[data-n] li:nth-child(1)
    divide(180, 1)

  for n in 2..6
    chunk = (360 / n)

    &[data-n={'"' + n + '"'}]
      for step in (2..n)
        pro = (100 / n) * (step - 1)

        li:nth-child({step})
          divide(chunk, step)

        input:nth-child({step}):checked
          & ~ ol
            gradient(pro)

            &:before
              content: '' + round(pro) + ''

  for i in 1..6
    input:nth-child({i}):checked
      previous = i - 1

      & ~ ol
        li:nth-child(-n+{previous}):before
          content: 'âœ“'

        li:nth-child({i})
          color: white

  /* define percentual progress in three stadia */
  for v in 1..100
    &[data-v={'"' + v + '"'}]
      ol
        gradient(v)

        &:before
          content: '' + v + ''

  &[data-v] ol
    background-repeat: no-repeat
    border-radius: 50%
    border: orbital solid border
    height: size
    list-style: none
    margin: 0 auto
    padding: 0
    position: relative
    text-align: center
    width: size

    &:before
      background-color: inner
      border-radius: 50%
      color: white
      font-size: font
      height: electron - round(font / 2)
      left: 50%
      margin: round(electron / -2)
      position: absolute
      top: 50%
      width: electron
      padding-top: round(font / 2)

  li
  li:before
    left: 50%
    margin: round(electron / -2)
    position: absolute
    top: 50%

  li
    background-color: border
    border-radius: 50%
    color: inner
    height: electron
    width: electron

    &:before
      content: counter(atomic)
      counter-increment: atomic
      font-size: 20px
      margin: -12px 0 0 -6px
      z-index: -1

    &:hover label
      cursor: pointer
      display: block

  label
    display: none
    height: 100%
    text-indent: -9999px
    width: 100%
